<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kano ë¶„ì„ ëŒ€ì‹œë³´ë“œ</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.1.0"></script>
    <!-- SheetJS (Excel/CSV Parsing) -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; color: #334155; }
        .step-content { display: none; }
        .step-content.active { display: block; animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
        .tab-btn.active { border-bottom: 3px solid #2563eb; color: #2563eb; font-weight: 700; }
        /* Video Responsive Helper */
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 0.5rem; margin-top: 0.5rem; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        
        /* Modal Styles */
        .modal { transition: opacity 0.2s ease-in-out; opacity: 0; pointer-events: none; }
        .modal.active { opacity: 1; pointer-events: auto; }

        /* Loading Spinner */
        .spinner { border: 3px solid rgba(255,255,255,0.3); border-radius: 50%; border-top: 3px solid white; width: 20px; height: 20px; animation: spin 1s linear infinite; display: inline-block; vertical-align: middle; margin-right: 5px;}
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <!-- [ì¶”ê°€ë¨] Back Button -->
                <a href="index.html" class="text-slate-400 hover:text-blue-600 transition-colors flex items-center gap-1 text-sm font-medium pr-4 border-r border-slate-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
                    ë©”ì¸ìœ¼ë¡œ
                </a>
                <div class="flex items-center gap-2">
                    <span class="bg-blue-600 text-white rounded p-1 font-black">K</span>
                    <h1 class="text-xl font-bold text-slate-800">Kano Analysis <span class="text-blue-600">Dashboard</span></h1>
                </div>
            </div>
            
            <div class="flex items-center gap-3">
                <div class="relative group flex items-center gap-2">
                    <!-- [ìˆ˜ì •ë¨] API Key Input with LocalStorage logic -->
                    <input type="password" id="api-key-input" oninput="saveApiKey(this.value)" placeholder="Gemini API Key ì…ë ¥" class="border border-gray-300 rounded px-3 py-1 text-xs w-40 focus:w-64 transition-all outline-none focus:border-blue-500">
                    <button onclick="openApiKeyModal()" class="text-xs text-gray-400 underline hover:text-blue-600 cursor-pointer">
                        í‚¤ ë°œê¸‰ ì•ˆë‚´
                    </button>
                </div>
            </div>
        </div>
        <!-- Tabs -->
        <div class="container mx-auto px-6 mt-2">
            <div class="flex gap-8 border-b border-gray-200">
                <button onclick="switchTab('design')" id="tab-design" class="tab-btn active pb-3 px-1 text-sm transition-colors">1. ì„¤ë¬¸ ì„¤ê³„ (Design)</button>
                <button onclick="switchTab('collect')" id="tab-collect" class="tab-btn pb-3 px-1 text-sm transition-colors">2. ë°ì´í„° ì…ë ¥ (Data)</button>
                <button onclick="switchTab('analyze')" id="tab-analyze" class="tab-btn pb-3 px-1 text-sm transition-colors">3. ê²°ê³¼ ë¶„ì„ (Report)</button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8 flex-grow">
        <!-- (Step 1, 2, 3 Content remains same as previous, omitted for brevity, ensure you copy the full content from previous response or I can reproduce if needed. Assuming previous logic works.) -->
        
        <!-- STEP 1: Survey Design -->
        <div id="step-design" class="step-content active">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Input Form -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Manual Input -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 h-fit">
                        <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                            ê¸°ëŠ¥ ì§ì ‘ ì¶”ê°€
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">ê¸°ëŠ¥/ì„œë¹„ìŠ¤ ëª…</label>
                                <input type="text" id="feat-name" placeholder="ì˜ˆ: ë‹¤í¬ëª¨ë“œ" class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-gray-500 mb-1">ì„¤ëª… (ì´ë¯¸ì§€/ìœ íŠœë¸Œ URL ê°€ëŠ¥)</label>
                                <input type="text" id="feat-desc" placeholder="ì„¤ëª…ê¸€ ë˜ëŠ” https://..." class="w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 outline-none">
                            </div>
                            <button onclick="addFeature()" class="w-full bg-slate-600 text-white py-2 rounded font-bold hover:bg-slate-700 transition-all">ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€</button>
                        </div>
                    </div>

                    <!-- AI Generator -->
                    <div class="bg-gradient-to-br from-indigo-50 to-blue-50 p-6 rounded-xl shadow-sm border border-indigo-100 h-fit relative overflow-hidden">
                        <div class="absolute top-0 right-0 -mt-2 -mr-2 w-16 h-16 bg-blue-400 rounded-full opacity-10 blur-xl"></div>
                        <h3 class="text-lg font-bold mb-2 flex items-center gap-2 text-indigo-900">
                            <span>âœ¨</span> AI ê¸°ëŠ¥ ì•„ì´ë””ì–´ ì œì•ˆ
                        </h3>
                        <p class="text-xs text-indigo-600 mb-4">ì„œë¹„ìŠ¤ ì£¼ì œë¥¼ ì…ë ¥í•˜ë©´ ì¹´ë…¸ ëª¨ë¸ ë¶„ì„ì— ì í•©í•œ ê¸°ëŠ¥ 5ê°€ì§€ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.</p>
                        
                        <div class="space-y-3">
                            <input type="text" id="ai-product-context" placeholder="ì˜ˆ: 20ëŒ€ë¥¼ ìœ„í•œ ì§ í…Œí¬ ê°€ê³„ë¶€ ì•±" class="w-full p-2 border border-indigo-200 rounded focus:ring-2 focus:ring-indigo-500 outline-none bg-white">
                            <button onclick="generateFeaturesWithAI()" id="btn-gen-ai" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 rounded font-bold hover:shadow-lg transition-all flex justify-center items-center gap-2">
                                <span>ì•„ì´ë””ì–´ ìƒì„±í•˜ê¸°</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- List & Preview -->
                <div class="lg:col-span-2">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-bold">ë“±ë¡ëœ ê¸°ëŠ¥ ëª©ë¡ (<span id="feat-count">0</span>)</h3>
                        <div class="flex gap-2">
                            <button onclick="openFormGuide()" class="bg-amber-100 border border-amber-200 text-amber-700 px-4 py-2 rounded text-sm font-bold hover:bg-amber-200 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                êµ¬ê¸€ í¼ ì‘ì„± íŒ
                            </button>
                            <button onclick="copyForGoogleForm()" class="bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded text-sm font-bold hover:bg-gray-50 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>
                                êµ¬ê¸€ í¼ìš© í…ìŠ¤íŠ¸ ë³µì‚¬
                            </button>
                        </div>
                    </div>
                    
                    <div id="feature-list" class="space-y-4">
                        <!-- Dynamic Feature Items -->
                        <div class="text-center py-12 text-gray-400 border-2 border-dashed border-gray-200 rounded-xl">
                            ì•„ì§ ë“±ë¡ëœ ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ AIì—ê²Œ ì•„ì´ë””ì–´ë¥¼ ìš”ì²­í•´ë³´ì„¸ìš”.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 2: Data Collection -->
        <div id="step-collect" class="step-content">
            <div class="max-w-4xl mx-auto">
                <div class="bg-white p-8 rounded-xl shadow-sm border border-gray-200 mb-8">
                    <h3 class="text-xl font-bold mb-6">ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</h3>
                    
                    <div class="mb-6">
                        <p class="text-sm text-gray-600 mb-2">1. êµ¬ê¸€ í¼(ì„¤ë¬¸) ê²°ê³¼ë¥¼ <strong>ìŠ¤í”„ë ˆë“œì‹œíŠ¸</strong>ë¡œ ì—½ë‹ˆë‹¤.</p>
                        <p class="text-sm text-gray-600 mb-2">2. ë°ì´í„° ì˜ì—­(í—¤ë” ì œì™¸)ì„ ë³µì‚¬í•˜ê±°ë‚˜, ì•„ë˜ì— CSV í˜•ì‹ìœ¼ë¡œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</p>
                        <p class="text-xs text-gray-400 mt-1">â€» 'ì¢‹ë‹¤', 'ì—†ëŠ” ê²Œ ë‚˜ì„ ê²ƒ ê°™ë‹¤' ë“± í•œê¸€ í…ìŠ¤íŠ¸ë„ ìë™ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.</p>
                    </div>

                    <textarea id="data-input" class="w-full h-48 p-4 bg-slate-50 border border-gray-300 rounded-lg text-xs font-mono focus:ring-2 focus:ring-blue-500 outline-none" placeholder="ì—¬ê¸°ì— ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...&#10;ì˜ˆ:&#10;1, 5&#10;ì¢‹ë‹¤, ì—†ìœ¼ë©´ ì•ˆëœë‹¤&#10;..."></textarea>
                    
                    <div class="flex gap-4 mt-4">
                        <button onclick="processData()" class="flex-grow bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-all">
                            ë°ì´í„° ë¶„ì„ ì‹œì‘
                        </button>
                        <button onclick="loadSampleData()" class="px-6 py-3 border border-gray-300 text-gray-600 rounded-lg font-bold hover:bg-gray-50">
                            ìƒ˜í”Œ ë°ì´í„° ë¡œë“œ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 3: Analysis Result -->
        <div id="step-analyze" class="step-content">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                <!-- Scatter Plot -->
                <div class="lg:col-span-2 space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                        <h4 class="text-lg font-bold mb-4">ì „ëµ ë¶„ì„ ë§µ (Scatter Plot)</h4>
                        <div class="relative h-[400px] w-full">
                            <canvas id="resultChart"></canvas>
                        </div>
                        <div class="mt-4 flex justify-center gap-4 text-xs text-gray-500">
                            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-amber-500"></span>Must-be</div>
                            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-blue-500"></span>One-dimensional</div>
                            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-rose-500"></span>Attractive</div>
                            <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-gray-400"></span>Indifferent</div>
                        </div>
                    </div>

                    <!-- AI Analysis Result Area -->
                    <div id="ai-analysis-container" class="bg-gradient-to-r from-slate-800 to-slate-900 text-white p-6 rounded-xl shadow-lg relative overflow-hidden hidden">
                        <div class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-blue-500 rounded-full opacity-20 blur-3xl"></div>
                        <div class="flex justify-between items-start mb-4 relative z-10">
                            <h4 class="text-lg font-bold flex items-center gap-2"><span>âœ¨</span> AI ì „ëµ ë¦¬í¬íŠ¸</h4>
                            <button onclick="analyzeWithAI()" id="btn-analyze-ai" class="bg-white/10 hover:bg-white/20 border border-white/20 text-xs px-3 py-1.5 rounded transition-all">
                                ë¦¬í¬íŠ¸ ìƒì„±/ë‹¤ì‹œí•˜ê¸°
                            </button>
                        </div>
                        <div id="ai-analysis-content" class="text-sm text-slate-200 leading-relaxed space-y-2 markdown-body">
                            <p class="animate-pulse">ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì „ëµì„ ìˆ˜ë¦½í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>
                        </div>
                    </div>
                </div>

                <!-- Result Table -->
                <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-[600px]">
                    <h4 class="text-lg font-bold mb-4">ìƒì„¸ ë¶„ì„ ê²°ê³¼</h4>
                    <div class="overflow-y-auto flex-grow">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-gray-50 text-gray-500 font-medium border-b sticky top-0 bg-white">
                                <tr>
                                    <th class="p-3">ê¸°ëŠ¥ëª…</th>
                                    <th class="p-3">ìœ í˜•</th>
                                    <th class="p-3 text-right">Better</th>
                                    <th class="p-3 text-right">Worse</th>
                                </tr>
                            </thead>
                            <tbody id="result-table-body" class="divide-y divide-gray-100">
                                <!-- Results here -->
                                <tr><td colspan="4" class="p-4 text-center text-gray-400">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <button onclick="analyzeWithAI()" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg font-bold hover:shadow-md transition-all flex justify-center items-center gap-2">
                            <span>âœ¨ AI ì „ëµ ë¦¬í¬íŠ¸ ìƒì„±</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Guide Modal (Form) -->
    <div id="form-guide-modal" class="modal fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl mx-4 overflow-hidden transform scale-100 transition-transform">
            <div class="bg-amber-100 p-4 border-b border-amber-200 flex justify-between items-center">
                <h3 class="text-amber-900 font-bold text-lg flex items-center gap-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                    ì¹´ë…¸ ëª¨ë¸ êµ¬ê¸€ í¼ ì‘ì„± ê°€ì´ë“œ
                </h3>
                <button onclick="closeFormGuide()" class="text-amber-800 hover:bg-amber-200 rounded-full p-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="p-6 space-y-6 text-slate-700 max-h-[70vh] overflow-y-auto">
                <div class="space-y-2">
                    <h4 class="font-bold text-blue-600 text-lg">1. ì§ˆë¬¸ ìœ í˜• ì„¤ì •</h4>
                    <p class="text-sm">ê° ì§ˆë¬¸ì˜ ìœ í˜•ì€ ë°˜ë“œì‹œ <strong>'ê°ê´€ì‹ ì§ˆë¬¸ (Multiple Choice)'</strong>ìœ¼ë¡œ ì„¤ì •í•˜ê³ , <strong>'í•„ìˆ˜(Required)'</strong>ë¥¼ ì²´í¬í•˜ì„¸ìš”.</p>
                </div>
                <div class="space-y-4">
                    <h4 class="font-bold text-blue-600 text-lg">2. ì‘ë‹µ ì„ íƒì§€ êµ¬ì„± (ì¤‘ìš”!)</h4>
                    <div class="bg-blue-50 p-4 rounded border border-blue-100">
                        <p class="font-bold text-blue-800 text-sm mb-2">ğŸ”µ Q1. (ê¸ì •) ì´ ê¸°ëŠ¥ì´ ì œê³µëœë‹¤ë©´ ì–´ë– ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                        <ul class="text-xs font-mono text-gray-700 space-y-1">
                            <li>1. ì¢‹ë‹¤. (Like)</li>
                            <li>2. ë‹¹ì—°í•˜ë‹¤. (Must-be)</li>
                            <li>3. ì¤‘ë¦½ì´ë‹¤. (Neutral)</li>
                            <li>4. ìˆì–´ë„ ìƒê´€ì—†ë‹¤. (Live with)</li>
                            <li>5. ë§ˆìŒì— ì•ˆ ë“ ë‹¤. (Dislike)</li>
                        </ul>
                    </div>
                    <div class="bg-red-50 p-4 rounded border border-red-100">
                        <p class="font-bold text-red-800 text-sm mb-2">ğŸ”´ Q2. (ë¶€ì •) ì´ ê¸°ëŠ¥ì´ ì œê³µë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì–´ë– ì‹œê² ìŠµë‹ˆê¹Œ?</p>
                        <ul class="text-xs font-mono text-gray-700 space-y-1">
                            <li>1. ì—†ëŠ” ê²Œ ë‚˜ì„ ê²ƒ ê°™ë‹¤. (Like)</li>
                            <li>2. ë‹¹ì—°íˆ ì—†ì–´ë„ ëœë‹¤. (Must-be)</li>
                            <li>3. ì¤‘ë¦½ì´ë‹¤. (Neutral)</li>
                            <li>4. ì•„ì‰½ì§€ë§Œ ì—†ì–´ë„ ê´œì°®ë‹¤. (Live with)</li>
                            <li>5. ì—†ìœ¼ë©´ ì•ˆëœë‹¤. (Dislike)</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 p-4 flex justify-end">
                <button onclick="closeFormGuide()" class="px-5 py-2.5 bg-slate-800 text-white rounded-lg hover:bg-slate-700 font-bold transition-colors">
                    í™•ì¸í–ˆìŠµë‹ˆë‹¤
                </button>
            </div>
        </div>
    </div>

    <!-- API Key Guide Modal (New for 2nd page) -->
    <div id="api-key-modal" class="modal fixed inset-0 z-[100] flex items-center justify-center bg-black bg-opacity-50">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-4 overflow-hidden transform scale-100 transition-transform">
            <div class="bg-blue-600 p-4 flex justify-between items-center">
                <h3 class="text-white font-bold text-lg flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11.536 21H9l-.386-1.543-1.543-1.543H5.464L3.727 15.273A6 6 0 015 9a6 6 0 016-6 2 2 0 014 2z" /></svg>
                    ë¬´ë£Œ Gemini API í‚¤ ë°œê¸‰ ë°©ë²•
                </h3>
                <button onclick="closeApiKeyModal()" class="text-white hover:bg-blue-700 rounded-full p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div class="p-6 space-y-6">
                <div class="flex items-start gap-3">
                    <div class="bg-blue-100 text-blue-700 font-bold rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">1</div>
                    <div>
                        <p class="font-bold text-gray-800 mb-1">Google AI Studio ì ‘ì†</p>
                        <a href="https://aistudio.google.com/app/apikey" target="_blank" class="inline-block mt-2 bg-gray-800 text-white text-xs px-3 py-1.5 rounded hover:bg-gray-700 transition-colors">
                            ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸° â†—
                        </a>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <div class="bg-blue-100 text-blue-700 font-bold rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">2</div>
                    <div>
                        <p class="font-bold text-gray-800 mb-1">API í‚¤ ìƒì„± í›„ ë³µì‚¬</p>
                        <p class="text-sm text-gray-600">'Create API key'ë¥¼ ëˆŒëŸ¬ í‚¤ë¥¼ ìƒì„±í•˜ê³  ë³µì‚¬í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <div class="bg-blue-100 text-blue-700 font-bold rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0">3</div>
                    <div>
                        <p class="font-bold text-gray-800 mb-1">ìƒë‹¨ ì…ë ¥ì°½ì— ë¶™ì—¬ë„£ê¸°</p>
                        <p class="text-sm text-gray-600">ì´ í˜ì´ì§€ ìƒë‹¨ì˜ 'Gemini API Key ì…ë ¥' ì¹¸ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</p>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 p-4 flex justify-end">
                <button onclick="closeApiKeyModal()" class="px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 font-medium transition-colors">
                    ë‹«ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg transition-opacity opacity-0 pointer-events-none z-50">
        Message
    </div>

    <script>
        // --- Global State ---
        let features = []; 
        let analysisResults = []; 

        // --- Helper: Get API Key from LocalStorage or Input ---
        function getApiKey() {
            // 1. Try input first
            let key = document.getElementById('api-key-input').value.trim();
            // 2. Try localStorage if input is empty
            if (!key) {
                key = localStorage.getItem('gemini_api_key') || "";
                if(key) document.getElementById('api-key-input').value = key;
            }
            
            if(!key) {
                showToast('âš ï¸ ìƒë‹¨ì— Gemini API Keyë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
                document.getElementById('api-key-input').focus();
                return null;
            }
            return key;
        }

        // --- Init: Load Key from Storage ---
        window.addEventListener('load', () => {
            const savedKey = localStorage.getItem('gemini_api_key');
            if(savedKey) {
                document.getElementById('api-key-input').value = savedKey;
            }
        });

        // Save Key on Input
        function saveApiKey(key) {
            localStorage.setItem('gemini_api_key', key);
        }

        // --- Modal Logic (Form Guide & API Key) ---
        function openFormGuide() {
            const modal = document.getElementById('form-guide-modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('active'), 10);
        }
        function closeFormGuide() {
            const modal = document.getElementById('form-guide-modal');
            modal.classList.remove('active');
            setTimeout(() => modal.classList.add('hidden'), 200);
        }
        document.getElementById('form-guide-modal').classList.add('hidden');

        function openApiKeyModal() {
            const modal = document.getElementById('api-key-modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('active'), 10);
        }
        function closeApiKeyModal() {
            const modal = document.getElementById('api-key-modal');
            modal.classList.remove('active');
            setTimeout(() => modal.classList.add('hidden'), 200);
        }
        document.getElementById('api-key-modal').classList.add('hidden');


        // --- Tab Logic ---
        function switchTab(tabId) {
            document.querySelectorAll('.step-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById(`step-${tabId}`).classList.add('active');
            document.getElementById(`tab-${tabId}`).classList.add('active');
        }

        // --- Step 1: Design Logic ---
        function addFeature(customName = null, customDesc = null) {
            const name = customName || document.getElementById('feat-name').value.trim();
            const desc = customDesc || document.getElementById('feat-desc').value.trim();
            
            if(!name) { showToast('ê¸°ëŠ¥ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
            if(features.length >= 10) { showToast('ìµœëŒ€ 10ê°œê¹Œì§€ë§Œ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤.'); return; }

            const feature = { id: Date.now() + Math.random(), name, desc };
            features.push(feature);
            
            // Clear inputs if manual
            if(!customName) {
                document.getElementById('feat-name').value = '';
                document.getElementById('feat-desc').value = '';
            }
            
            renderFeatures();
        }

        // âœ¨ AI Feature Generator
        async function generateFeaturesWithAI() {
            const key = getApiKey();
            if (!key) return;

            const context = document.getElementById('ai-product-context').value.trim();
            if (!context) { showToast('ì„œë¹„ìŠ¤ ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }

            const btn = document.getElementById('btn-gen-ai');
            const originalText = btn.innerHTML;
            btn.innerHTML = `<div class="spinner"></div> ìƒì„± ì¤‘...`;
            btn.disabled = true;

            const prompt = `
                Role: Senior Product Manager.
                Task: Suggest 5 distinct features for a product described as: "${context}".
                Output: JSON Array of objects with 'name' (short title) and 'desc' (1 sentence description). 
                Do not use Markdown. Return ONLY the JSON.
                Language: Korean.
            `;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                const data = await response.json();
                
                if (!data.candidates || data.candidates.length === 0) {
                    throw new Error(data.error?.message || "AIê°€ ì‘ë‹µì„ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                }

                let text = data.candidates[0].content.parts[0].text;
                text = text.replace(/```json/g, '').replace(/```/g, '').trim();
                
                const newFeatures = JSON.parse(text);
                
                // Clear existing and add new
                features = []; 
                newFeatures.forEach(f => addFeature(f.name, f.desc));
                showToast('âœ¨ 5ê°€ì§€ ê¸°ëŠ¥ ì•„ì´ë””ì–´ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');

            } catch (error) {
                console.error(error);
                showToast(error.message || 'AI ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // Helper to detect Media
        function renderMediaOrText(content) {
            if (!content) return '';
            const ytRegex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i;
            const ytMatch = content.match(ytRegex);
            if (ytMatch && ytMatch[1]) {
                return `<div class="video-container bg-black"><iframe src="https://www.youtube.com/embed/${ytMatch[1]}" frameborder="0" allowfullscreen></iframe></div><p class="text-xs text-blue-500 mt-1 truncate underline cursor-pointer" onclick="window.open('${content}')">${content}</p>`;
            }
            const imgRegex = /\.(jpeg|jpg|gif|png|webp|svg)($|\?)/i;
            if (content.match(imgRegex) || (content.startsWith('http') && content.includes('images'))) {
                return `<img src="${content}" class="w-full h-40 object-cover rounded mt-2 border border-gray-100" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'"><p class="text-sm text-gray-500 mt-1 hidden">${content}</p>`;
            }
            return `<p class="text-sm text-gray-500 mt-1 whitespace-pre-wrap">${content}</p>`;
        }

        function removeFeature(id) {
            features = features.filter(f => f.id !== id);
            renderFeatures();
        }

        function renderFeatures() {
            const listEl = document.getElementById('feature-list');
            document.getElementById('feat-count').innerText = features.length;

            if(features.length === 0) {
                listEl.innerHTML = `<div class="text-center py-12 text-gray-400 border-2 border-dashed border-gray-200 rounded-xl">ì•„ì§ ë“±ë¡ëœ ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ AIì—ê²Œ ì•„ì´ë””ì–´ë¥¼ ìš”ì²­í•´ë³´ì„¸ìš”.</div>`;
                return;
            }

            listEl.innerHTML = features.map((f, idx) => `
                <div class="bg-white p-4 rounded-lg border border-gray-200 flex justify-between items-start group hover:shadow-md transition-all">
                    <div class="w-full mr-4">
                        <div class="flex items-center gap-2">
                            <span class="bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded font-bold">#${idx + 1}</span>
                            <h4 class="font-bold text-slate-800">${f.name}</h4>
                        </div>
                        ${renderMediaOrText(f.desc)}
                    </div>
                    <button onclick="removeFeature(${f.id})" class="text-gray-400 hover:text-red-500 p-1 flex-shrink-0">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                    </button>
                </div>
            `).join('');
        }

        function copyForGoogleForm() {
            if(features.length === 0) { showToast('ë³µì‚¬í•  ê¸°ëŠ¥ì´ ì—†ìŠµë‹ˆë‹¤.'); return; }
            let text = "=== [í•„ë…] êµ¬ê¸€ í¼ ì‘ì„± ê°€ì´ë“œ ===\nâ€» ì¤‘ìš”: ê¸ì • ì§ˆë¬¸ê³¼ ë¶€ì • ì§ˆë¬¸ì˜ ì„ íƒì§€ê°€ ë‹¤ë¦…ë‹ˆë‹¤. ì •í™•íˆ ë³µì‚¬í•´ì£¼ì„¸ìš”.\n1. ì§ˆë¬¸ ìœ í˜•: 'ê°ê´€ì‹ ì§ˆë¬¸(Multiple Choice)' / í•„ìˆ˜(Required) ì²´í¬\n=====================================\n\n";
            features.forEach((f, i) => {
                text += `[ì„¹ì…˜ ${i+1}: ${f.name}]\n`;
                if(f.desc.startsWith('http')) { text += `ì°¸ê³  ìë£Œ: ${f.desc}\n\n`; } else { text += `ì„¤ëª…: ${f.desc}\n\n`; }
                text += `Q1. (ê¸ì •) ${f.name} ê¸°ëŠ¥ì´ ì œê³µëœë‹¤ë©´ ì–´ë– ì‹œê² ìŠµë‹ˆê¹Œ?\n[ì„ íƒì§€]\n1. ì¢‹ë‹¤. (Like)\n2. ë‹¹ì—°í•˜ë‹¤. (Must-be)\n3. ì¤‘ë¦½ì´ë‹¤. (Neutral)\n4. ìˆì–´ë„ ìƒê´€ì—†ë‹¤. (Live with)\n5. ë§ˆìŒì— ì•ˆ ë“ ë‹¤. (Dislike)\n\n`;
                text += `Q2. (ë¶€ì •) ${f.name} ê¸°ëŠ¥ì´ ì œê³µë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì–´ë– ì‹œê² ìŠµë‹ˆê¹Œ?\n[ì„ íƒì§€]\n1. ì—†ëŠ” ê²Œ ë‚˜ì„ ê²ƒ ê°™ë‹¤. (Like)\n2. ë‹¹ì—°íˆ ì—†ì–´ë„ ëœë‹¤. (Must-be)\n3. ì¤‘ë¦½ì´ë‹¤. (Neutral)\n4. ì•„ì‰½ì§€ë§Œ ì—†ì–´ë„ ê´œì°®ë‹¤. (Live with)\n5. ì—†ìœ¼ë©´ ì•ˆëœë‹¤. (Dislike)\n\n--------------------------------\n`;
            });
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed"; textArea.style.left = "0"; textArea.style.top = "0";
            document.body.appendChild(textArea); textArea.focus(); textArea.select();
            try { const successful = document.execCommand('copy'); if (successful) { showToast('í…ìŠ¤íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸ì •/ë¶€ì • ì„ íƒì§€ê°€ ë‹¤ë¥¸ ì ì— ì£¼ì˜í•˜ì„¸ìš”.'); } else { showToast('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.'); } } catch (err) { console.error('Copy failed', err); }
            document.body.removeChild(textArea);
        }

        // --- Step 2: Data Processing Logic ---
        const kanoMap = [ ['Q', 'A', 'A', 'A', 'O'], ['R', 'I', 'I', 'I', 'M'], ['R', 'I', 'I', 'I', 'M'], ['R', 'I', 'I', 'I', 'M'], ['R', 'R', 'R', 'R', 'Q'] ];
        function mapAnswerToScore(text) {
            if(typeof text === 'number') return Math.min(Math.max(text, 1), 5) - 1;
            const t = String(text).trim();
            if(t.includes('1') || t.includes('ì¢‹ë‹¤') || t.includes('ë§ˆìŒì— ë“ ') || t.includes('ì—†ëŠ” ê²Œ ë‚˜ì„') || t.includes('Like')) return 0;
            if(t.includes('2') || t.includes('ë‹¹ì—°') || t.includes('Must')) return 1;
            if(t.includes('3') || t.includes('ì¤‘ë¦½') || t.includes('ìƒê´€ì—†') || t.includes('Neutral')) return 2;
            if(t.includes('4') || t.includes('ì°¸ì„') || t.includes('ê´œì°®ë‹¤') || t.includes('ìˆì–´ë„ ìƒê´€ì—†') || t.includes('Live')) return 3;
            if(t.includes('5') || t.includes('ë§ˆìŒì— ì•ˆ') || t.includes('ì—†ìœ¼ë©´ ì•ˆ') || t.includes('Dislike')) return 4;
            return 2;
        }

        function loadSampleData() {
            if(features.length === 0) { addFeature('ìë™ ì €ì¥', 'ì…ë ¥ ì¤‘ ë‚´ìš© ìë™ ì €ì¥'); addFeature('ë‹¤í¬ ëª¨ë“œ', 'ëˆˆì´ í¸ì•ˆí•œ ì–´ë‘ìš´ í™”ë©´'); addFeature('AI ìš”ì•½', 'ê¸´ ê¸€ì„ 3ì¤„ë¡œ ìš”ì•½'); }
            let csv = "";
            for(let i=0; i<20; i++) {
                let row = [];
                features.forEach(() => { row.push(Math.floor(Math.random() * 5) + 1, Math.floor(Math.random() * 5) + 1); });
                csv += row.join(',') + "\n";
            }
            document.getElementById('data-input').value = csv;
            showToast('ìƒ˜í”Œ ë°ì´í„°ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
        
        function processData() {
            const rawText = document.getElementById('data-input').value.trim();
            if(!rawText) { showToast('ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
            if(features.length === 0) { showToast('ë¨¼ì € ê¸°ëŠ¥ì„ ì •ì˜í•´ì£¼ì„¸ìš” (Step 1).'); switchTab('design'); return; }

            const rows = rawText.split('\n');
            const results = features.map(f => ({ id: f.id, name: f.name, counts: { A:0, O:0, M:0, I:0, R:0, Q:0 }, total: 0 }));

            rows.forEach(row => {
                if(!row.trim()) return;
                const cols = row.split(/,|\t/);
                features.forEach((feat, idx) => {
                    const colIdx = idx * 2;
                    if(cols.length <= colIdx + 1) return;
                    const funcScore = mapAnswerToScore(cols[colIdx]);
                    const dysScore = mapAnswerToScore(cols[colIdx+1]);
                    const category = kanoMap[funcScore][dysScore];
                    results[idx].counts[category]++;
                    results[idx].total++;
                });
            });

            analysisResults = results.map(res => {
                const { A, O, M, I } = res.counts;
                const totalValid = A + O + M + I;
                const better = totalValid ? (A + O) / totalValid : 0;
                const worse = totalValid ? ((O + M) / totalValid) * -1 : 0;
                let maxCat = 'I'; let maxVal = -1;
                for(const [cat, val] of Object.entries(res.counts)) { if(cat !== 'Q' && cat !== 'R' && val > maxVal) { maxVal = val; maxCat = cat; } }
                return { ...res, better, worse, category: maxCat };
            });

            renderCharts();
            switchTab('analyze');
        }

        // âœ¨ AI Strategic Analysis
        async function analyzeWithAI() {
            const key = getApiKey();
            if (!key) return;
            if (analysisResults.length === 0) { showToast('ë¶„ì„í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.'); return; }

            const container = document.getElementById('ai-analysis-container');
            const content = document.getElementById('ai-analysis-content');
            const btn = document.getElementById('btn-analyze-ai');
            
            container.classList.remove('hidden');
            content.innerHTML = `<div class="flex items-center gap-2"><div class="spinner"></div><p>ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì „ëµì„ ìˆ˜ë¦½í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p></div>`;
            btn.disabled = true;

            // Simplify data for AI
            const summaryData = analysisResults.map(r => ({
                feature: r.name,
                category: r.category,
                satisfaction_coefficient: r.better.toFixed(2),
                dissatisfaction_coefficient: r.worse.toFixed(2)
            }));

            const prompt = `
                Role: Senior Product Manager Expert in Kano Model.
                Task: Analyze these Kano results and provide a strategic summary in Korean.
                Data: ${JSON.stringify(summaryData)}
                
                Requirements:
                1. Identify MVP features (Must-be).
                2. Identify key differentiators (Attractive).
                3. Identify performance drivers (One-dimensional).
                4. Suggest which features to drop or de-prioritize (Indifferent/Reverse).
                5. Provide a short conclusion.
                
                Output Format: Markdown. Use bolding and bullet points.
            `;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${key}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                const data = await response.json();
                
                if (!data.candidates || data.candidates.length === 0) {
                    throw new Error(data.error?.message || "AIê°€ ì‘ë‹µì„ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                }

                const text = data.candidates[0].content.parts[0].text;
                
                // Parse Markdown using marked.js
                content.innerHTML = marked.parse(text);

            } catch (error) {
                console.error(error);
                content.innerText = 'AI ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message;
            } finally {
                btn.disabled = false;
            }
        }

        // --- Step 3: Visualization Logic ---
        let resultChartInstance = null;
        function renderCharts() {
            const tbody = document.getElementById('result-table-body');
            tbody.innerHTML = analysisResults.map(res => {
                const catMap = { 'M':'Must-be', 'O':'One-dimensional', 'A':'Attractive', 'I':'Indifferent', 'R':'Reverse', 'Q':'Questionable' };
                const colorMap = { 'M':'text-amber-600', 'O':'text-blue-600', 'A':'text-rose-600', 'I':'text-gray-500', 'R':'text-red-600', 'Q':'text-gray-400' };
                return `<tr class="hover:bg-gray-50 transition-colors"><td class="p-3 font-medium text-slate-700">${res.name}</td><td class="p-3 font-bold ${colorMap[res.category]}">${catMap[res.category]}</td><td class="p-3 text-right font-mono text-blue-600">${res.better.toFixed(2)}</td><td class="p-3 text-right font-mono text-amber-600">${res.worse.toFixed(2)}</td></tr>`;
            }).join('');

            const ctx = document.getElementById('resultChart').getContext('2d');
            if(resultChartInstance) resultChartInstance.destroy();
            const dataPoints = analysisResults.map(res => ({ x: res.worse, y: res.better, label: res.name, category: res.category }));

            resultChartInstance = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Features',
                        data: dataPoints,
                        backgroundColor: (ctx) => {
                            const cat = ctx.raw?.category;
                            if(cat === 'M') return 'rgba(245, 158, 11, 0.8)';
                            if(cat === 'O') return 'rgba(37, 99, 235, 0.8)';
                            if(cat === 'A') return 'rgba(244, 63, 94, 0.8)';
                            return 'rgba(156, 163, 175, 0.8)';
                        },
                        pointRadius: 10, pointHoverRadius: 12
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'ë¶ˆë§Œì¡± ê³„ìˆ˜ (Worse) ->', font:{weight:'bold'} }, min: -1, max: 0, grid: { color: '#e2e8f0' } },
                        y: { title: { display: true, text: 'ë§Œì¡± ê³„ìˆ˜ (Better) ->', font:{weight:'bold'} }, min: 0, max: 1, grid: { color: '#e2e8f0' } }
                    },
                    plugins: {
                        tooltip: { callbacks: { label: (ctx) => `${ctx.raw.label} (${ctx.raw.category})`, afterLabel: (ctx) => `Better: ${ctx.raw.y.toFixed(2)}, Worse: ${ctx.raw.x.toFixed(2)}` } },
                        annotation: { annotations: {
                            lineH: { type: 'line', yMin: 0.5, yMax: 0.5, borderColor: 'rgba(0,0,0,0.1)', borderWidth: 2 },
                            lineV: { type: 'line', xMin: -0.5, xMax: -0.5, borderColor: 'rgba(0,0,0,0.1)', borderWidth: 2 },
                            labelM: { type: 'label', xValue: -0.8, yValue: 0.2, content: 'Must-be', color: 'rgba(0,0,0,0.2)', font:{size:20, weight:'bold'} },
                            labelO: { type: 'label', xValue: -0.8, yValue: 0.8, content: 'One-dimensional', color: 'rgba(0,0,0,0.2)', font:{size:20, weight:'bold'} },
                            labelA: { type: 'label', xValue: -0.2, yValue: 0.8, content: 'Attractive', color: 'rgba(0,0,0,0.2)', font:{size:20, weight:'bold'} },
                            labelI: { type: 'label', xValue: -0.2, yValue: 0.2, content: 'Indifferent', color: 'rgba(0,0,0,0.2)', font:{size:20, weight:'bold'} }
                        }}
                    }
                }
            });
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.classList.remove('opacity-0');
            setTimeout(() => toast.classList.add('opacity-0'), 3000);
        }
    </script>
</body>
</html>
